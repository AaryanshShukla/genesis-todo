{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saary/.gemini/antigravity/scratch/gand-faad-todo/lib/db.ts"],"sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\n\r\nconst DB_PATH = path.join(process.cwd(), 'todos.json');\r\n\r\nexport type Priority = 'critical' | 'high' | 'medium' | 'low' | 'none';\r\nexport type Category = 'work' | 'personal' | 'ideas' | 'goals' | 'shopping' | 'health' | 'learning' | 'other';\r\n\r\nexport interface Subtask {\r\n  id: string;\r\n  text: string;\r\n  completed: boolean;\r\n}\r\n\r\nexport interface Todo {\r\n  id: string;\r\n  text: string;\r\n  completed: boolean;\r\n  createdAt: number;\r\n  priority: Priority;\r\n  category: Category;\r\n  subtasks: Subtask[];\r\n  tags: string[];\r\n  dueDate?: number;\r\n  notes?: string;\r\n  color?: string;\r\n}\r\n\r\nexport const getTodos = (): Todo[] => {\r\n  if (!fs.existsSync(DB_PATH)) {\r\n    return [];\r\n  }\r\n  const data = fs.readFileSync(DB_PATH, 'utf-8');\r\n  try {\r\n    return JSON.parse(data);\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const saveTodos = (todos: Todo[]) => {\r\n  fs.writeFileSync(DB_PATH, JSON.stringify(todos, null, 2));\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,MAAM,UAAU,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAyBlC,MAAM,WAAW;IACtB,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,UAAU;QAC3B,OAAO,EAAE;IACX;IACA,MAAM,OAAO,wGAAE,CAAC,YAAY,CAAC,SAAS;IACtC,IAAI;QACF,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,OAAO,EAAE;IACX;AACF;AAEO,MAAM,YAAY,CAAC;IACxB,wGAAE,CAAC,aAAa,CAAC,SAAS,KAAK,SAAS,CAAC,OAAO,MAAM;AACxD"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saary/.gemini/antigravity/scratch/gand-faad-todo/app/api/todos/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { getTodos, saveTodos } from '@/lib/db';\r\n\r\nexport async function PUT(request: Request, { params }: { params: { id: string } }) {\r\n    const { id } = params;\r\n    const body = await request.json();\r\n    const todos = getTodos();\r\n\r\n    const todoIndex = todos.findIndex((t) => t.id === id);\r\n\r\n    if (todoIndex === -1) {\r\n        return NextResponse.json({ error: 'Todo not found' }, { status: 404 });\r\n    }\r\n\r\n    todos[todoIndex] = { ...todos[todoIndex], ...body };\r\n    saveTodos(todos);\r\n\r\n    return NextResponse.json(todos[todoIndex]);\r\n}\r\n\r\nexport async function DELETE(request: Request, { params }: { params: { id: string } }) {\r\n    const { id } = params;\r\n    const todos = getTodos();\r\n\r\n    const newTodos = todos.filter((t) => t.id !== id);\r\n\r\n    if (newTodos.length === todos.length) {\r\n        return NextResponse.json({ error: 'Todo not found' }, { status: 404 });\r\n    }\r\n\r\n    saveTodos(newTodos);\r\n\r\n    return NextResponse.json({ success: true });\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAgB,EAAE,EAAE,MAAM,EAA8B;IAC9E,MAAM,EAAE,EAAE,EAAE,GAAG;IACf,MAAM,OAAO,MAAM,QAAQ,IAAI;IAC/B,MAAM,QAAQ,IAAA,qLAAQ;IAEtB,MAAM,YAAY,MAAM,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAElD,IAAI,cAAc,CAAC,GAAG;QAClB,OAAO,8MAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACxE;IAEA,KAAK,CAAC,UAAU,GAAG;QAAE,GAAG,KAAK,CAAC,UAAU;QAAE,GAAG,IAAI;IAAC;IAClD,IAAA,sLAAS,EAAC;IAEV,OAAO,8MAAY,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU;AAC7C;AAEO,eAAe,OAAO,OAAgB,EAAE,EAAE,MAAM,EAA8B;IACjF,MAAM,EAAE,EAAE,EAAE,GAAG;IACf,MAAM,QAAQ,IAAA,qLAAQ;IAEtB,MAAM,WAAW,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAE9C,IAAI,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE;QAClC,OAAO,8MAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACxE;IAEA,IAAA,sLAAS,EAAC;IAEV,OAAO,8MAAY,CAAC,IAAI,CAAC;QAAE,SAAS;IAAK;AAC7C"}}]
}